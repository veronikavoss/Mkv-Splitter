# MKV Lossless Editor (MKV 무손실 자르기)

![UI Screenshot](https://img.shields.io/badge/GUI-PySide6-brightgreen) ![FFmpeg](https://img.shields.io/badge/Backend-FFmpeg-blue) ![Python](https://img.shields.io/badge/Language-Python-yellow)

"MKV Lossless Editor"는 비디오 파일 포맷(주로 MKV, MP4, AVI)에서 화질과 음질의 저하(Re-encoding) 없이 **원초 상태 그대로(Lossless)** 빠르게 특정 구간만 잘라내거나 추출할 수 있도록 돕는 Python 기반의 데스크톱 GUI 애플리케이션입니다.

강력한 FFmpeg 툴의 `-c copy` 스트림 복사 기능을 백엔드로 활용하며, PyQt의 최신 버전인 **PySide6**를 통해 사용자에게 부드럽고 직관적인 조작 환경을 제공합니다.

---

## 🚀 주요 기능

- **초고속 무손실 추출**: 인코딩을 새로 하지 않고 스트림을 그대로 복사(`-c copy`)하여 원본 화질을 100% 유지하면서도 수 초 만에 파일 자르기가 완료됩니다.
- **다중 구간(Multi-segment) 자르기 기능**: 하나의 동영상 파일에서 여러 개의 "시작-끝" 구간을 누적해서 지정한 뒤, '내보내기' 버튼 한 번으로 여러 개의 클립 파일을 일괄 분리하여 저장할 수 있습니다.
- **선택적 트랙(스트림) 추출 모드**: 영상에 포함된 여러 개의 오디오, 자막, 비디오 트랙 목록(`ffprobe` 연동)을 UI 표에서 확인하고, 불필요한 트랙의 체크를 해제하여 원하는 트랙만 `-map` 옵션으로 분리 추출할 수 있습니다. (구간을 자르지 않고 트랙만 제거하는 것도 가능)
- **정밀한 미디어 제어 및 탐색**:
  - **[ 1프레임 뒤 ] / [ 1프레임 앞 ]**: 약 33ms 단위로 영상을 앞뒤로 탐색하여 키프레임을 미세하게 찾아낼 수 있습니다.
  - **[ 5초 뒤 ] / [ 5초 앞 ]**: 넓은 범위를 빠르게 스킵하며 원하는 장면으로 이동합니다.
- **세련된 다크 테마 및 UI**: 윈도우 기본 타이틀바부터 내부 위젯까지 일관된 세련된 다크 그레이/골드 포인트 테마가 적용되었으며, 자체 앱 아이콘을 지원합니다.
- **풍부한 키보드 단축키 지원**: 마우스 없이도 편집을 완료할 수 있는 전체 창 단축키를 제공합니다.
  - `Space`: 재생 / 일시정지, `Esc`: 정지(초기화)
  - `←` / `→` 화살표: 5초 뒤로 / 앞으로 이동
  - `↑` / `↓` 화살표: 볼륨 올리기 / 내리기, `M` 키: 음소거 토글
  - `D` / `F` 키: 1프레임 뒤로 / 앞으로 이동
  - `[` / `]` 키: 시작점 / 끝점 마킹
  - `,` / `.` 키: 시작점 / 끝점 마커 위치로 즉각 이동
  - `Delete` 키: 선택된 구간 및 마커 삭제

---

## 🛠️ 요구 사항 (Prerequisites)

이 프로그램을 실행하기 위해서는 다음 환경이 시스템에 구축되어 있어야 합니다.

1. **Python 3.8 이상**
2. **PySide6**: Python용 Qt GUI 프레임워크 패키지
   ```bash
   pip install PySide6
   ```
3. **FFmpeg**: 비디오를 자르기 위한 핵심 백엔드 코어 모듈
   - FFmpeg 실행 파일이 반드시 운영체제의 시스템 환경 변수 `PATH`에 등록되어 있어야 합니다. (cmd나 터미널에서 `ffmpeg -version`을 쳤을 때 정상적으로 인식되어야 작동합니다.)
   - FFmpeg 다운로드: [https://ffmpeg.org/download.html](https://ffmpeg.org/download.html)

---

## 📥 설치 및 실행 방법

1. 소스 코드를 다운로드하거나 저장소를 Clone 합니다.
2. 터미널(명령 프롬프트/PowerShell)을 열고 해당 프로젝트 폴더로 이동합니다.
3. 아래의 명령어를 입력하여 프로그램을 실행합니다.
   ```bash
   python main.py
   ```

---

## 💡 사용 방법

1. **파일 열기**: 프로그램 창에 비디오 파일(.mkv, .mp4, .avi)을 끌어다 놓습니다. (드래그 앤 드롭)
2. **구간 탐색**: 하단의 재생 버튼이나 키보드 `Space` (재생/일시정지), 혹은 방향키(`←/→`), `D/F` 키를 활용하여 원하는 컷 지점으로 이동합니다.
3. **구간 지정**:
   - 자르기를 시작할 구간에서 **`[`** 키를 누릅니다.
   - 자르기를 끝마칠 구간에서 **`]`** 키를 누릅니다.
   - 우측 하단 목록과 재생 바 위에 해당 구간이 누적해서 등록됩니다.
4. **구간 관리 (선택)**:
   - 목록에 추가된 구간을 **더블 클릭**하면 그 구간의 시작점으로 영상이 즉시 이동합니다.
   - 잘못 지정된 구간은 클릭 후 **`Delete`** 키를 눌러 삭제할 수 있습니다.
5. **특정 트랙(음성/자막) 제거 (선택)**:
   - 좌측 하단의 '트랙, 챕터와 태그' 표에서 원본 영상에 포함된 오디오/비디오/자막 목록을 확인할 수 있습니다.
   - 유지하고 싶지 않은 음성이나 자막의 맨 앞 체크박스를 해제하면 결과물에서 영구 삭제됩니다. (구간 자르기 없이 트랙만 걸러내는 추출 모드도 가능합니다.)
6. **내보내기**: 편집이 완료되었다면 **`[내보내기]`** 버튼을 클릭합니다.
   - 원본 파일 위치에 `원본이름_cut_1.mkv` (여러 구간일 경우) 혹은 `원본이름_extracted.mkv` (트랙만 추출했을 경우) 형식으로 빠르게 생성됩니다.

---

## 📂 파일 구조 설명

- `main.py`: 애플리케이션의 진입점(Entry point)이자 전역 드래그 앤 드롭 이벤트를 통제하는 메인 스크립트입니다.
- `gui.py`: PySide6를 이용하여 고급화된 다크 테마 UI 창 레이아웃(플레이어, 타임라인, 트랙 테이블, 커스텀 슬라이더 등)을 조율하는 핵심 뷰(View) 파일입니다.
- `video_cutter.py`: `FFmpeg` 및 `ffprobe` 명령어를 Python의 `subprocess`로 파싱하여, 무손실 영상 자르기와 특정 트랙(스트림) `-map` 처리를 집행하는 백엔드 코어 모듈입니다.
- `make_icon.py`: PySide6 렌더라이저(`QPainter`)를 기반으로 프로그램 자체 다크/골드 컨셉 윈도우 타이틀바 아이콘을 코드로 직접 생성하는 독립 스크립트입니다.
- `assets/`: 프로그램 UI를 구성하는 `play.png`, `app_icon.png` 등 커스텀 리소스가 보관된 폴더입니다.

---

## 📌 유의 사항

- 이 프로그램은 인코딩을 배제한 `-c copy` 무손실 자르기 방식을 채택하고 있으므로, 영상의 코덱이나 프레임 구조(특히 I-Frame/Keyframe 의존도)에 따라 `시작점`과 `끝점`이 1 프레임 단위로 완벽히 칼같이 잘리지 않을 수 있습니다. (가장 가까운 키프레임 기준으로 영상이 보정 절단될 수 있음을 참고하세요.)
