# MKV Lossless Cutter (MKV 무손실 자르기)

![UI Screenshot](https://img.shields.io/badge/GUI-PySide6-brightgreen) ![FFmpeg](https://img.shields.io/badge/Backend-FFmpeg-blue) ![Python](https://img.shields.io/badge/Language-Python-yellow)

"MKV Lossless Cutter"는 비디오 파일 포맷(주로 MKV, MP4, AVI)에서 화질과 음질의 저하(Re-encoding) 없이 **원초 상태 그대로(Lossless)** 빠르게 특정 구간만 잘라내거나 추출할 수 있도록 돕는 Python 기반의 데스크톱 GUI 애플리케이션입니다.

강력한 FFmpeg 툴의 `-c copy` 스트림 복사 기능을 백엔드로 활용하며, PyQt의 최신 버전인 **PySide6**를 통해 사용자에게 부드럽고 직관적인 조작 환경을 제공합니다.

---

## 🚀 주요 기능

- **초고속 무손실 추출**: 인코딩을 새로 하지 않고 스트림을 그대로 복사(`-c copy`)하여 원본 화질을 100% 유지하면서도 수 초 만에 파일 자르기가 오나료됩니다.
- **다중 구간(Multi-segment) 자르기 기능**: 하나의 동영상 파일에서 여러 개의 "시작-끝" 구간을 누적해서 지정한 뒤, '내보내기' 버튼 한 번으로 여러 개의 클립 파일을 일괄 분리하여 저장할 수 있습니다.
- **정밀한 미디어 제어 및 탐색**:
  - **[ 1프레임 뒤 ] / [ 1프레임 앞 ]**: 약 33ms 단위로 영상을 앞뒤로 탐색하여 키프레임을 미세하게 찾아낼 수 있습니다.
  - **[ 5초 뒤 ] / [ 5초 앞 ]**: 넓은 범위를 빠르게 스킵하며 원하는 장면으로 이동합니다.
- **직관적인 타임라인 UI 시각화**: 동영상 플레이바(SeekSlider) 위에 자신이 지정한 모든 분할 영역이 골드/블루 색상으로 시각적으로 직관적으로 표시됩니다.
- **단축키 및 드래그 앤 드롭 지원**:
  - `[I]` 키: 시작점(In) 마킹
  - `[O]` 키: 끝점(Out) 마킹
  - 미디어 파일을 프로그램 창 아무 곳에나 드래그 & 드롭하여 즉시 엽니다.

---

## 🛠️ 요구 사항 (Prerequisites)

이 프로그램을 실행하기 위해서는 다음 환경이 시스템에 구축되어 있어야 합니다.

1. **Python 3.8 이상**
2. **PySide6**: Python용 Qt GUI 프레임워크 패키지
   ```bash
   pip install PySide6
   ```
3. **FFmpeg**: 비디오를 자르기 위한 핵심 백엔드 코어 모듈
   - FFmpeg 실행 파일이 반드시 운영체제의 시스템 환경 변수 `PATH`에 등록되어 있어야 합니다. (cmd나 터미널에서 `ffmpeg -version`을 쳤을 때 정상적으로 인식되어야 작동합니다.)
   - FFmpeg 다운로드: [https://ffmpeg.org/download.html](https://ffmpeg.org/download.html)

---

## 📥 설치 및 실행 방법

1. 소스 코드를 다운로드하거나 저장소를 Clone 합니다.
2. 터미널(명령 프롬프트/PowerShell)을 열고 해당 프로젝트 폴더로 이동합니다.
3. 아래의 명령어를 입력하여 프로그램을 실행합니다.
   ```bash
   python main.py
   ```

---

## 💡 사용 방법

1. **파일 열기**: 프로그램 우측 하단의 `[파일 열기]` 버튼을 누르거나 탐색기에서 비디오 파일(.mkv, .mp4, .avi)을 끌어다 놓습니다.
2. **구간 탐색**: 프로그램 하단 중앙의 재생(▷), 일시정지, 5초 앞/뒤, 1프레임 앞/뒤 탐색 버튼들을 활용하여 원하는 컷 지점으로 이동합니다.
3. **구간 지정**:
   - 자르기를 시작할 구간에서 **`[시작점 (I)]`** 버튼을 클릭합니다.
   - 자르기를 끝마칠 구간에서 **`[끝점 (O)]`** 버튼을 클릭합니다.
   - (타임라인에 해당 구간이 골드 색상의 블록으로 누적 저장됩니다.)
4. **추가 구간 지정 (선택)**: 파일 내에서 자르고 싶은 다른 구간이 더 있다면 위 3번 과정을 계속 반복하여 잘라낼 영역들을 추가로 누적합니다.
5. **초기화 및 정지**: 현재 재생을 완전히 멈추고 파일을 닫거나, 지정한 모든 구간들을 지워버리고 싶다면 중앙의 **`[정지(□)]`** 버튼을 이용합니다.
6. **내보내기**: 모든 구간 지정이 끝났다면 **`[내보내기]`** 버튼을 클릭합니다.
   - 원본 파일 위치에 `원본이름_cut_1.mkv`, `원본이름_cut_2.mkv` 형식으로 잘린 파일들이 초고속으로 생성됩니다.

---

## 📂 파일 구조 설명

- `main.py`: 애플리케이션의 진입점(Entry point)이자 전역 드래그 앤 드롭 이벤트를 통제하는 메인 스크립트입니다.
- `gui.py`: PySide6를 이용하여 UI 창 레이아웃(플레이어, 타임라인 슬라이더, 제어 아이콘 버튼 등)을 그리는 핵심 뷰(View) 파일입니다.
- `video_cutter.py`: `FFmpeg` 명령어 구문을 조합하고 Python의 `subprocess`를 통해 실제 영상 자르기를 백엔드에서 무손실로 집행하는 코어 모듈입니다.
- `assets/`: 프로그램 UI를 구성하는 `play.png`, `pause.png`, `start_point.png` 등 커스텀 버튼 아이콘 이미지들이 보관된 폴더입니다.

---

## 📌 유의 사항

- 이 프로그램은 인코딩을 배제한 `-c copy` 무손실 자르기 방식을 채택하고 있으므로, 영상의 코덱이나 프레임 구조(특히 I-Frame/Keyframe 의존도)에 따라 `시작점`과 `끝점`이 1 프레임 단위로 완벽히 칼같이 잘리지 않을 수 있습니다. (가장 가까운 키프레임 기준으로 영상이 보정 절단될 수 있음을 참고하세요.)
